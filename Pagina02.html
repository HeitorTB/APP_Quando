<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APP</title>
    <link rel="stylesheet" href="Pagina02.css">
</head>
<body>
    
    <header>
        <h1>Playlist #1</h1>
    </header>
    
    <main>
        
        <figure>
            <img src="Imagens/Foto_Principal.png" alt="Foto da Playlist">
        </figure>
       
        <h2>Escute-me quando...</h2>
        <h3>Artista: Heitor Brasil</h3>

        <div class="card-audio" onclick="trocarAudio('acordar.mp3', this)">
            <div class="texto-container">
                <span class="numero">11.</span>
                <span class="titulo">Quando acabar de acordar</span>
            </div>
            <span class="seta">></span>
        </div>

        <div class="card-audio" onclick="trocarAudio('insonia.mp3', this)">
            <div class="texto-container">
                <span class="numero">12.</span>
                <span class="titulo">Quando estiver com insonia</span>
            </div>
            <span class="seta">></span>
        </div>

        <div class="card-audio" onclick="trocarAudio('duvidar.mp3', this)">
            <div class="texto-container">
                <span class="numero">13.</span>
                <span class="titulo">Quando duvidar do meu amor</span>
            </div>
            <span class="seta">></span>
        </div>

        <div class="card-audio" onclick="trocarAudio('lembrancas.mp3', this)">
            <div class="texto-container">
                <span class="numero">14.</span>
                <span class="titulo">Quando quiser lembrar de mim</span>
            </div>
            <span class="seta">></span>
        </div>

        <div class="card-audio" onclick="trocarAudio('admiracao.mp3', this)">
            <div class="texto-container">
                <span class="numero">15.</span>
                <span class="titulo">Quando quiser ser admirada</span>
            </div>
            <span class="seta">></span>
        </div>

        <div class="card-audio" onclick="trocarAudio('musica.mp3', this)">
            <div class="texto-container">
                <span class="numero">16.</span>
                <span class="titulo">Quando quiser ouvir uma música</span>
            </div>
            <span class="seta">></span>
        </div>

        <div class="card-audio" onclick="trocarAudio('teamo.mp3', this)">
            <div class="texto-container">
                <span class="numero">17.</span>
                <span class="titulo">Quando quiser um te amo</span>
            </div>
            <span class="seta">></span>
        </div>

        <div class="card-audio" onclick="trocarAudio('boanoite.mp3', this)">
            <div class="texto-container">
                <span class="numero">18.</span>
                <span class="titulo">Quando faltar um boa noite</span>
            </div>
            <span class="seta">></span>
        </div>

        <div class="card-audio" onclick="trocarAudio('ansiosa.mp3', this)">
            <div class="texto-container">
                <span class="numero">19.</span>
                <span class="titulo">Quando estiver ansiosa</span>
            </div>
            <span class="seta">></span>
        </div>

        <div class="card-audio" onclick="trocarAudio('sozinha.mp3', this)">
            <div class="texto-container">
                <span class="numero">20.</span>
                <span class="titulo">Quando se sentir sozinha</span>
            </div>
            <span class="seta">></span>
        </div>

        <div class="paginas">
            <div class="pagina1"><a href="Pagina01.html">1</a></div>
            <div class="pagina3"><a href="Pagina03.html">3</a></div>
        </div>

        <audio id="player-principal" src="" preload="auto" playsinline></audio>

    </main>

    <footer class="player-footer">
        
        <div class="footer-left">
            <div class="footer-text">
                <p id="titulo-rodape">Selecione um áudio</p>
                <p class="artista-rodape">Heitor Brasil</p>
            </div>
        </div>

        <div class="footer-controls">
            <button id="btn-play-pause" onclick="togglePlay()">
                <span id="icon-play">II</span> </button>
        </div>

        <div class="footer-player-container">
            <div class="time-controls">
                <span id="tempo-atual">0:00</span>
                <span id="tempo-restante">-0:00</span>
            </div>
        </div>
    </footer>

    <script>
        const player = document.getElementById('player-principal');
        const btnPlayPause = document.getElementById('btn-play-pause');
        const iconPlay = document.getElementById('icon-play');
        const footer = document.querySelector('.player-footer');

        function trocarAudio(arquivo, elemento) {
            const todosCards = document.querySelectorAll('.card-audio');
            const tituloRodape = document.getElementById('titulo-rodape');

            // 1. Destaque visual do card
            todosCards.forEach(c => c.classList.remove('ativo'));
            elemento.classList.add('ativo');

            // 2. Atualiza o rodapé
            tituloRodape.innerText = elemento.querySelector('.titulo').innerText;

            // 3. Toca o arquivo
            player.src = "Audios/" + arquivo;
            player.play();
                    
            iconPlay.innerText = "II"; 
        }

        function togglePlay() {
            if (player.src === "" || player.src.endsWith('/')) return; // Evita erro se não houver áudio

            if (player.paused) {
                player.play();
                iconPlay.innerText = "II";
                footer.classList.add('animar');
            } else {
                player.pause();
                iconPlay.innerText = "►";
                footer.classList.remove('animar');
            }
        }

        // IMPORTANTE: Detecta quando o áudio acaba sozinho
        player.onended = () => {
            footer.classList.remove('animar');
            iconPlay.innerText = "►";
            // Opcional: tirar o destaque do card quando a música acabar
            document.querySelectorAll('.card-audio').forEach(c => c.classList.remove('ativo'));
        };

        function formatarTempo(segundos) {
            const min = Math.floor(segundos / 60);
            const seg = Math.floor(segundos % 60);
            return `${min}:${seg < 10 ? '0' : ''}${seg}`;
        }

        // Evento que atualiza o tempo na tela
        player.ontimeupdate = function() {
            const tempoAtual = document.getElementById('tempo-atual');
            const tempoRestante = document.getElementById('tempo-restante');

            if (!isNaN(player.duration)) {
                // Atualiza tempo percorrido
                tempoAtual.innerText = formatarTempo(player.currentTime);
                
                // Atualiza quanto falta (duração total - tempo atual)
                const falta = player.duration - player.currentTime;
                tempoRestante.innerText = "-" + formatarTempo(falta);
            }
        };
    
    </script>

</body>
</html>