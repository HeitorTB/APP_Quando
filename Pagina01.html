<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APP</title>
    <link rel="stylesheet" href="Pagina01.css">
</head>
<body>
    
    <header>
        <h1>Playlist #1</h1>
    </header>
    
    <main>
        
        <figure>
            <img src="Imagens/Foto_Principal.png" alt="Foto da Playlist">
        </figure>
       
        <h2>Escute-me quando...</h2>
        <h3>Artista: Heitor Brasil</h3>

        <div class="card-audio" onclick="trocarAudio('presente.mp4', this)">
            <div class="texto-container">
                <span class="numero">1.</span>
                <span class="titulo">Quando receber esse presente</span>
            </div>
            <span class="seta">></span>
        </div>

        <div class="card-audio" onclick="trocarAudio('triste.mp4', this)">
            <div class="texto-container">
                <span class="numero">2.</span>
                <span class="titulo">Quando estiver triste</span>
            </div>
            <span class="seta">></span>
        </div>

        <div class="card-audio" onclick="trocarAudio('feliz.mp4', this)">
            <div class="texto-container">
                <span class="numero">3.</span>
                <span class="titulo">Quando estiver feliz</span>
            </div>
            <span class="seta">></span>
        </div>

        <div class="card-audio" onclick="trocarAudio('tedio.mp4', this)">
            <div class="texto-container">
                <span class="numero">4.</span>
                <span class="titulo">Quando estiver com tédio</span>
            </div>
            <span class="seta">></span>
        </div>

        <div class="card-audio" onclick="trocarAudio('poema.mp4', this)">
            <div class="texto-container">
                <span class="numero">5.</span>
                <span class="titulo">Quando quiser um poema</span>
            </div>
            <span class="seta">></span>
        </div>

        <div class="card-audio" onclick="trocarAudio('saudade.mp4', this)">
            <div class="texto-container">
                <span class="numero">6.</span>
                <span class="titulo">Quando estiver com saudade</span>
            </div>
            <span class="seta">></span>
        </div>

        <div class="card-audio" onclick="trocarAudio('medo.mp4', this)">
            <div class="texto-container">
                <span class="numero">7.</span>
                <span class="titulo">Quando estiver com medo</span>
            </div>
            <span class="seta">></span>
        </div>

        <div class="card-audio" onclick="trocarAudio('conselho.mp4', this)">
            <div class="texto-container">
                <span class="numero">8.</span>
                <span class="titulo">Quando quiser um conselho</span>
            </div>
            <span class="seta">></span>
        </div>

        <div class="card-audio" onclick="trocarAudio('cansada.mp4', this)">
            <div class="texto-container">
                <span class="numero">9.</span>
                <span class="titulo">Quando estiver cansada</span>
            </div>
            <span class="seta">></span>
        </div>

        <div class="card-audio" onclick="trocarAudio('chateada.mp4', this)">
            <div class="texto-container">
                <span class="numero">10.</span>
                <span class="titulo">Quando estiver chateada</span>
            </div>
            <span class="seta">></span>
        </div>

        <div class="paginas">
            <div class="pagina2"><a href="Pagina02.html">2</a></div>
            <div class="pagina3"><a href="Pagina03.html">3</a></div>
        </div>

        <audio id="player-principal" src="" preload="auto" playsinline></audio>

    </main>

    <footer class="player-footer">
        
        <div class="footer-left">
            <div class="footer-text">
                <p id="titulo-rodape">Selecione um áudio</p>
                <p class="artista-rodape">Heitor Brasil</p>
            </div>
        </div>

        <div class="footer-controls">
            <button id="btn-play-pause" onclick="togglePlay()">
                <span id="icon-play">II</span> </button>
        </div>

        <div class="footer-player-container">
            <div class="time-controls">
                <span id="tempo-atual">0:00</span>
                <span id="tempo-restante">-0:00</span>
            </div>
        </div>
    </footer>

    <script>
        const player = document.getElementById('player-principal');
        const btnPlayPause = document.getElementById('btn-play-pause');
        const iconPlay = document.getElementById('icon-play');
        const footer = document.querySelector('.player-footer');

        function trocarAudio(arquivo, elemento) {
            const todosCards = document.querySelectorAll('.card-audio');
            const tituloRodape = document.getElementById('titulo-rodape');

            // 1. Destaque visual do card
            todosCards.forEach(c => c.classList.remove('ativo'));
            elemento.classList.add('ativo');

            // 2. Atualiza o rodapé
            tituloRodape.innerText = elemento.querySelector('.titulo').innerText;

            // 3. Toca o arquivo
            player.src = "Audios/" + arquivo;
            player.play();
                    
            iconPlay.innerText = "II"; 
        }

        function togglePlay() {
            if (player.src === "" || player.src.endsWith('/')) return; // Evita erro se não houver áudio

            if (player.paused) {
                player.play();
                iconPlay.innerText = "II";
                footer.classList.add('animar');
            } else {
                player.pause();
                iconPlay.innerText = "►";
                footer.classList.remove('animar');
            }
        }

        // IMPORTANTE: Detecta quando o áudio acaba sozinho
        player.onended = () => {
            footer.classList.remove('animar');
            iconPlay.innerText = "►";
            // Opcional: tirar o destaque do card quando a música acabar
            document.querySelectorAll('.card-audio').forEach(c => c.classList.remove('ativo'));
        };

        function formatarTempo(segundos) {
            const min = Math.floor(segundos / 60);
            const seg = Math.floor(segundos % 60);
            return `${min}:${seg < 10 ? '0' : ''}${seg}`;
        }

        // Evento que atualiza o tempo na tela
        player.ontimeupdate = function() {
            const tempoAtual = document.getElementById('tempo-atual');
            const tempoRestante = document.getElementById('tempo-restante');

            if (!isNaN(player.duration)) {
                // Atualiza tempo percorrido
                tempoAtual.innerText = formatarTempo(player.currentTime);
                
                // Atualiza quanto falta (duração total - tempo atual)
                const falta = player.duration - player.currentTime;
                tempoRestante.innerText = "-" + formatarTempo(falta);
            }
        };
    
    </script>

</body>
</html>